appId: com.gramstr.app
productName: Gramstr
directories:
  output: dist
  buildResources: build-resources

files:
  - electron/**/*
  - .next/**/*
  - public/**/*
  - backend/**/*
  - "!backend/venv/**/*"
  - "!backend/__pycache__/**/*"
  - "!backend/*.txt"
  - package.json
  - package-lock.json
  - node_modules/**/*

extraResources:
  - from: backend
    to: backend
    filter:
      - "**/*"
      - "!venv/**/*"
      - "!__pycache__/**/*"

mac:
  category: public.app-category.social-networking
  icon: build-resources/icon.icns
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: build-resources/entitlements.mac.plist
  entitlementsInherit: build-resources/entitlements.mac.plist
  target:
    - target: dmg
      arch:
        - x64
        - arm64
    - target: zip
      arch:
        - x64
        - arm64

win:
  target:
    - target: nsis
      arch:
        - x64
    - target: portable
      arch:
        - x64
  icon: build-resources/icon.ico

linux:
  target:
    - target: AppImage
      arch:
        - x64
    - target: deb
      arch:
        - x64
    - target: rpm
      arch:
        - x64
  icon: build-resources/icon.png
  category: Network

nsis:
  oneClick: false
  perMachine: false
  allowToChangeInstallationDirectory: true
  deleteAppDataOnUninstall: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: Gramstr

dmg:
  contents:
    - x: 410
      y: 150
      type: link
      path: /Applications
    - x: 130
      y: 150
      type: file

publish:
  - provider: github
    owner: yourusername
    repo: gramstr
    releaseType: release